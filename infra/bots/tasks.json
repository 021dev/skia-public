{
  "jobs": {
    "Housekeeper-OnDemand-Presubmit": {
      "priority": 1,
      "tasks": [
        "Housekeeper-OnDemand-Presubmit"
      ],
      "trigger": "on demand"
    }
  },
  "tasks": {
    "Housekeeper-OnDemand-Presubmit": {
      "caches": [
        {
          "name": "git",
          "path": "cache/git"
        },
        {
          "name": "git_cache",
          "path": "cache/git_cache"
        },
        {
          "name": "vpython",
          "path": "cache/vpython"
        }
      ],
      "casSpec": "run-recipe",
      "cipd_packages": [
        {
          "name": "infra/3pp/tools/git/linux-amd64",
          "path": "cipd_bin_packages",
          "version": "version:2.29.2.chromium.6"
        },
        {
          "name": "infra/recipe_bundles/chromium.googlesource.com/chromium/tools/build",
          "path": "recipe_bundle",
          "version": "git_revision:a8bcedad6768e206c4d2bd1718caa849f29cd42d"
        },
        {
          "name": "infra/tools/git/${platform}",
          "path": "cipd_bin_packages",
          "version": "git_revision:14be8b751c0fb567535f520f8a7bc60c3f40b378"
        },
        {
          "name": "infra/tools/luci-auth/${platform}",
          "path": "cipd_bin_packages",
          "version": "git_revision:14be8b751c0fb567535f520f8a7bc60c3f40b378"
        },
        {
          "name": "infra/tools/luci/git-credential-luci/${platform}",
          "path": "cipd_bin_packages",
          "version": "git_revision:14be8b751c0fb567535f520f8a7bc60c3f40b378"
        },
        {
          "name": "infra/tools/luci/kitchen/${platform}",
          "path": ".",
          "version": "git_revision:14be8b751c0fb567535f520f8a7bc60c3f40b378"
        },
        {
          "name": "infra/tools/luci/vpython/${platform}",
          "path": "cipd_bin_packages",
          "version": "git_revision:14be8b751c0fb567535f520f8a7bc60c3f40b378"
        }
      ],
      "command": [
        "cipd_bin_packages/vpython${EXECUTABLE_SUFFIX}",
        "-u",
        "skia/infra/bots/run_recipe.py",
        "${ISOLATED_OUTDIR}",
        "run_presubmit",
        "{\"$kitchen\":{\"devshell\":true,\"git_auth\":true},\"buildbucket_build_id\":\"<(BUILDBUCKET_BUILD_ID)\",\"buildername\":\"Housekeeper-OnDemand-Presubmit\",\"category\":\"cq\",\"patch_gerrit_url\":\"https://skia-review.googlesource.com\",\"patch_issue\":\"<(ISSUE_INT)\",\"patch_project\":\"skia\",\"patch_ref\":\"<(PATCH_REF)\",\"patch_repo\":\"<(PATCH_REPO)\",\"patch_set\":\"<(PATCHSET_INT)\",\"patch_storage\":\"<(PATCH_STORAGE)\",\"reason\":\"CQ\",\"repo_name\":\"skia\",\"repository\":\"<(REPO)\",\"revision\":\"<(REVISION)\",\"swarm_out_dir\":\"output_ignored\",\"task_id\":\"<(TASK_ID)\"}",
        "skia"
      ],
      "dimensions": [
        "cpu:x86-64-Haswell_GCE",
        "gpu:none",
        "machine_type:n1-highcpu-64",
        "os:Debian-10.3",
        "pool:Skia"
      ],
      "env_prefixes": {
        "PATH": [
          "cipd_bin_packages",
          "cipd_bin_packages/bin"
        ],
        "VPYTHON_VIRTUALENV_ROOT": [
          "cache/vpython"
        ]
      },
      "execution_timeout_ns": 3600000000000,
      "extra_tags": {
        "log_location": "logdog://logs.chromium.org/skia/${SWARMING_TASK_ID}/+/annotations"
      },
      "io_timeout_ns": 3600000000000,
      "max_attempts": 2,
      "service_account": "skia-external-compile-tasks@skia-swarming-bots.iam.gserviceaccount.com"
    }
  },
  "casSpecs": {
    "canvaskit": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "compile": {
      "root": "..",
      "paths": [
        "skia/.clang-format",
        "skia/.clang-tidy",
        "skia/.gn",
        "skia/BUILD.gn",
        "skia/bench",
        "skia/bin/fetch-clang-format",
        "skia/bin/fetch-gn",
        "skia/buildtools",
        "skia/dm",
        "skia/example",
        "skia/experimental/Networking/SkSockets.cpp",
        "skia/experimental/Networking/SkSockets.h",
        "skia/experimental/c-api-example/skia-c-example.c",
        "skia/experimental/canvaskit",
        "skia/experimental/nima/NimaActor.cpp",
        "skia/experimental/nima/NimaActor.h",
        "skia/experimental/svg/model",
        "skia/experimental/tools/coreGraphicsPdf2png.cpp",
        "skia/fuzz",
        "skia/gm",
        "skia/gn",
        "skia/include",
        "skia/infra/bots/assets/android_ndk_darwin/VERSION",
        "skia/infra/bots/assets/android_ndk_linux/VERSION",
        "skia/infra/bots/assets/android_ndk_windows/VERSION",
        "skia/infra/bots/assets/cast_toolchain/VERSION",
        "skia/infra/bots/assets/clang_linux/VERSION",
        "skia/infra/bots/assets/clang_win/VERSION",
        "skia/infra/bots/run_recipe.py",
        "skia/infra/canvaskit",
        "skia/infra/pathkit",
        "skia/modules",
        "skia/platform_tools/android/apps/arcore/src/main/cpp",
        "skia/platform_tools/android/apps/skottie/src/main/cpp",
        "skia/platform_tools/android/launcher/skia_launcher.cpp",
        "skia/platform_tools/android/vulkan/Skia_Vulkan_Android.h",
        "skia/platform_tools/libraries/include/arcore_c_api.h",
        "skia/resources",
        "skia/samplecode",
        "skia/src",
        "skia/tests",
        "skia/third_party",
        "skia/tools"
      ],
      "excludes": [
        "^(.*\\/)*\\.git(\\/.*)*$"
      ]
    },
    "empty": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "lottie-ci": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "lottie-web": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "pathkit": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "perf": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "puppeteer": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "recipes": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "run-recipe": {
      "root": "..",
      "paths": [
        "skia/infra/bots/run_recipe.py"
      ],
      "excludes": [
        "^(.*\\/)*\\.git(\\/.*)*$"
      ]
    },
    "skottie-wasm": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "skpbench": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "skqp": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "task-drivers": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "test": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "wasm-gm": {
      "digest": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855/0"
    },
    "whole-repo": {
      "root": "..",
      "paths": [
        "skia"
      ],
      "excludes": [
        "^(.*\\/)*\\.git(\\/.*)*$"
      ]
    }
  }
}
