    1. store_src_rg                   coords = src.rg
    2. init_lane_masks                CondMask = LoopMask = RetMask = true
    3. zero_2_slots_unmasked          s.x, s.y = 0
    4. copy_constant                  $0 = 0x3F800000 (1.0)
    5. copy_slot_unmasked             s.x = $0
    6. copy_constant                  $0 = 0x00000002 (2.802597e-45)
    7. copy_slot_unmasked             s.y = $0
    8. copy_2_slots_unmasked          [returns_a_struct].result.x, [returns_a_struct].result.y = s.x, s.y
    9. copy_2_slots_unmasked          $0..1 = [returns_a_struct].result.x, [returns_a_struct].result.y
   10. label                          label 0x00000000
   11. copy_2_slots_unmasked          s.x₁, s.y₁ = $0..1
   12. copy_2_slots_unmasked          s.x₂, s.y₂ = $0..1
   13. copy_2_slots_unmasked          $0..1 = s.x₂, s.y₂
   14. cast_to_float_from_int         $1 = IntToFloat($1)
   15. add_float                      $0 += $1
   16. copy_slot_unmasked             [accepts_a_struct].result = $0
   17. label                          label 0x00000001
   18. copy_slot_unmasked             x = $0
   19. copy_2_slots_unmasked          s.x₃, s.y₃ = s.x₁, s.y₁
   20. copy_slot_unmasked             $0 = s.x₃
   21. copy_constant                  $1 = 0x3F800000 (1.0)
   22. add_float                      $0 += $1
   23. copy_slot_unmasked             s.x₃ = $0
   24. copy_slot_unmasked             $0 = s.y₃
   25. copy_constant                  $1 = 0x00000001 (1.401298e-45)
   26. add_int                        $0 += $1
   27. copy_slot_unmasked             s.y₃ = $0
   28. copy_2_slots_unmasked          $0..1 = s.x₃, s.y₃
   29. copy_2_slots_unmasked          s.x₁, s.y₁ = $0..1
   30. label                          label 0x00000002
   31. copy_constant                  [constructs_a_struct].result.x = 0x40000000 (2.0)
   32. copy_constant                  [constructs_a_struct].result.y = 0x00000003 (4.203895e-45)
   33. copy_2_slots_unmasked          $0..1 = [constructs_a_struct].result.x, [constructs_a_struct].result.y
   34. label                          label 0x00000003
   35. copy_2_slots_unmasked          expected.x, expected.y = $0..1
   36. zero_4_slots_unmasked          n1.a.x, n1.a.y, n1.b.x, n1.b.y = 0
   37. zero_4_slots_unmasked          n2.a.x, n2.a.y, n2.b.x, n2.b.y = 0
   38. zero_4_slots_unmasked          n3.a.x, n3.a.y, n3.b.x, n3.b.y = 0
   39. zero_2_slots_unmasked          s.x, s.y = 0
   40. copy_constant                  $0 = 0x3F800000 (1.0)
   41. copy_slot_unmasked             s.x = $0
   42. copy_constant                  $0 = 0x00000002 (2.802597e-45)
   43. copy_slot_unmasked             s.y = $0
   44. copy_2_slots_unmasked          [returns_a_struct].result.x, [returns_a_struct].result.y = s.x, s.y
   45. copy_2_slots_unmasked          $0..1 = [returns_a_struct].result.x, [returns_a_struct].result.y
   46. label                          label 0x00000004
   47. copy_2_slots_unmasked          n1.a.x, n1.a.y = $0..1
   48. copy_2_slots_unmasked          $0..1 = n1.a.x, n1.a.y
   49. copy_2_slots_unmasked          n1.b.x, n1.b.y = $0..1
   50. copy_4_slots_unmasked          $0..3 = n1.a.x, n1.a.y, n1.b.x, n1.b.y
   51. copy_4_slots_unmasked          n2.a.x, n2.a.y, n2.b.x, n2.b.y = $0..3
   52. copy_4_slots_unmasked          n3.a.x, n3.a.y, n3.b.x, n3.b.y = $0..3
   53. copy_2_slots_unmasked          s.x₃, s.y₃ = n3.b.x, n3.b.y
   54. copy_slot_unmasked             $0 = s.x₃
   55. copy_constant                  $1 = 0x3F800000 (1.0)
   56. add_float                      $0 += $1
   57. copy_slot_unmasked             s.x₃ = $0
   58. copy_slot_unmasked             $0 = s.y₃
   59. copy_constant                  $1 = 0x00000001 (1.401298e-45)
   60. add_int                        $0 += $1
   61. copy_slot_unmasked             s.y₃ = $0
   62. copy_2_slots_unmasked          $0..1 = s.x₃, s.y₃
   63. copy_2_slots_unmasked          n3.b.x, n3.b.y = $0..1
   64. label                          label 0x00000005
   65. copy_constant                  c1.f4(0) = 0x3F800000 (1.0)
   66. copy_constant                  c1.f4(1) = 0x40000000 (2.0)
   67. copy_constant                  c1.f4(2) = 0x40400000 (3.0)
   68. copy_constant                  c1.f4(3) = 0x40800000 (4.0)
   69. copy_constant                  c1.i3(0) = 0x00000005 (7.006492e-45)
   70. copy_constant                  c1.i3(1) = 0x00000006 (8.407791e-45)
   71. copy_constant                  c1.i3(2) = 0x00000007 (9.809089e-45)
   72. copy_constant                  $0 = colorGreen(1)
   73. copy_constant                  c2.f4(1) = 0x40000000 (2.0)
   74. copy_constant                  c2.f4(2) = 0x40400000 (3.0)
   75. copy_constant                  c2.f4(3) = 0x40800000 (4.0)
   76. copy_constant                  c2.i3(0) = 0x00000005 (7.006492e-45)
   77. copy_constant                  c2.i3(1) = 0x00000006 (8.407791e-45)
   78. copy_constant                  c2.i3(2) = 0x00000007 (9.809089e-45)
   79. copy_slot_unmasked             c2.f4(0) = $0
   80. copy_constant                  $0 = colorGreen(0)
   81. copy_constant                  c3.f4(1) = 0x40000000 (2.0)
   82. copy_constant                  c3.f4(2) = 0x40400000 (3.0)
   83. copy_constant                  c3.f4(3) = 0x40800000 (4.0)
   84. copy_constant                  c3.i3(0) = 0x00000005 (7.006492e-45)
   85. copy_constant                  c3.i3(1) = 0x00000006 (8.407791e-45)
   86. copy_constant                  c3.i3(2) = 0x00000007 (9.809089e-45)
   87. copy_slot_unmasked             c3.f4(0) = $0
   88. store_condition_mask           $14 = CondMask
   89. copy_slot_unmasked             $15 = x
   90. copy_constant                  $16 = 0x40400000 (3.0)
   91. cmpeq_float                    $15 = equal($15, $16)
   92. copy_slot_unmasked             $16 = s.x₁
   93. copy_constant                  $17 = 0x40000000 (2.0)
   94. cmpeq_float                    $16 = equal($16, $17)
   95. bitwise_and_int                $15 &= $16
   96. copy_slot_unmasked             $16 = s.y₁
   97. copy_constant                  $17 = 0x00000003 (4.203895e-45)
   98. cmpeq_int                      $16 = equal($16, $17)
   99. bitwise_and_int                $15 &= $16
  100. copy_slot_unmasked             $16 = s.x₁
  101. copy_slot_unmasked             $17 = expected.x
  102. cmpeq_float                    $16 = equal($16, $17)
  103. copy_slot_unmasked             $17 = s.y₁
  104. copy_slot_unmasked             $18 = expected.y
  105. cmpeq_int                      $17 = equal($17, $18)
  106. bitwise_and_int                $16 &= $17
  107. bitwise_and_int                $15 &= $16
  108. copy_slot_unmasked             $16 = s.x₁
  109. copy_constant                  $12 = 0x40000000 (2.0)
  110. copy_constant                  $13 = 0x00000003 (4.203895e-45)
  111. copy_slot_unmasked             $17 = $12
  112. cmpeq_float                    $16 = equal($16, $17)
  113. copy_slot_unmasked             $17 = s.y₁
  114. copy_slot_unmasked             $18 = $13
  115. cmpeq_int                      $17 = equal($17, $18)
  116. bitwise_and_int                $16 &= $17
  117. bitwise_and_int                $15 &= $16
  118. zero_slot_unmasked             $0 = 0
  119. merge_condition_mask           CondMask = $14 & $15
  120. branch_if_no_active_lanes      branch_if_no_active_lanes +18 (label 6 at #138)
  121. copy_slot_unmasked             $1 = s.x₁
  122. branch_if_no_active_lanes      branch_if_no_active_lanes +8 (label 7 at #130)
  123. zero_2_slots_unmasked          s.x, s.y = 0
  124. copy_constant                  $12 = 0x3F800000 (1.0)
  125. copy_slot_masked               s.x = Mask($12)
  126. copy_constant                  $12 = 0x00000002 (2.802597e-45)
  127. copy_slot_masked               s.y = Mask($12)
  128. copy_2_slots_unmasked          $12..13 = s.x, s.y
  129. copy_2_slots_masked            [returns_a_struct].result.x, [returns_a_struct].result.y = Mask($12..13)
  130. label                          label 0x00000007
  131. copy_slot_unmasked             $2 = $12
  132. cmpne_float                    $1 = notEqual($1, $2)
  133. copy_slot_unmasked             $2 = s.y₁
  134. copy_slot_unmasked             $3 = $13
  135. cmpne_int                      $2 = notEqual($2, $3)
  136. bitwise_or_int                 $1 |= $2
  137. copy_slot_masked               $0 = Mask($1)
  138. label                          label 0x00000006
  139. load_condition_mask            CondMask = $14
  140. copy_slot_unmasked             $1 = n1.a.x
  141. copy_slot_unmasked             $2 = n2.a.x
  142. cmpeq_float                    $1 = equal($1, $2)
  143. copy_slot_unmasked             $2 = n1.a.y
  144. copy_slot_unmasked             $3 = n2.a.y
  145. cmpeq_int                      $2 = equal($2, $3)
  146. bitwise_and_int                $1 &= $2
  147. copy_slot_unmasked             $2 = n1.b.x
  148. copy_slot_unmasked             $3 = n2.b.x
  149. cmpeq_float                    $2 = equal($2, $3)
  150. copy_slot_unmasked             $3 = n1.b.y
  151. copy_slot_unmasked             $4 = n2.b.y
  152. cmpeq_int                      $3 = equal($3, $4)
  153. bitwise_and_int                $2 &= $3
  154. bitwise_and_int                $1 &= $2
  155. bitwise_and_int                $0 &= $1
  156. copy_slot_unmasked             $1 = n1.a.x
  157. copy_slot_unmasked             $2 = n3.a.x
  158. cmpne_float                    $1 = notEqual($1, $2)
  159. copy_slot_unmasked             $2 = n1.a.y
  160. copy_slot_unmasked             $3 = n3.a.y
  161. cmpne_int                      $2 = notEqual($2, $3)
  162. bitwise_or_int                 $1 |= $2
  163. copy_slot_unmasked             $2 = n1.b.x
  164. copy_slot_unmasked             $3 = n3.b.x
  165. cmpne_float                    $2 = notEqual($2, $3)
  166. copy_slot_unmasked             $3 = n1.b.y
  167. copy_slot_unmasked             $4 = n3.b.y
  168. cmpne_int                      $3 = notEqual($3, $4)
  169. bitwise_or_int                 $2 |= $3
  170. bitwise_or_int                 $1 |= $2
  171. bitwise_and_int                $0 &= $1
  172. copy_slot_unmasked             $1 = n3.a.x
  173. copy_constant                  $14 = 0x3F800000 (1.0)
  174. copy_constant                  $15 = 0x00000002 (2.802597e-45)
  175. copy_constant                  $16 = 0x40000000 (2.0)
  176. copy_constant                  $17 = 0x00000003 (4.203895e-45)
  177. copy_slot_unmasked             $2 = $14
  178. cmpeq_float                    $1 = equal($1, $2)
  179. copy_slot_unmasked             $2 = n3.a.y
  180. copy_slot_unmasked             $3 = $15
  181. cmpeq_int                      $2 = equal($2, $3)
  182. bitwise_and_int                $1 &= $2
  183. copy_slot_unmasked             $2 = n3.b.x
  184. copy_slot_unmasked             $3 = $16
  185. cmpeq_float                    $2 = equal($2, $3)
  186. copy_slot_unmasked             $3 = n3.b.y
  187. copy_slot_unmasked             $4 = $17
  188. cmpeq_int                      $3 = equal($3, $4)
  189. bitwise_and_int                $2 &= $3
  190. bitwise_and_int                $1 &= $2
  191. bitwise_and_int                $0 &= $1
  192. copy_4_slots_unmasked          $1..4 = c1.f4
  193. copy_4_slots_unmasked          $5..8 = c2.f4
  194. cmpeq_4_floats                 $1..4 = equal($1..4, $5..8)
  195. bitwise_and_2_ints             $1..2 &= $3..4
  196. bitwise_and_int                $1 &= $2
  197. copy_3_slots_unmasked          $2..4 = c1.i3
  198. copy_3_slots_unmasked          $5..7 = c2.i3
  199. cmpeq_3_ints                   $2..4 = equal($2..4, $5..7)
  200. bitwise_and_int                $3 &= $4
  201. bitwise_and_int                $2 &= $3
  202. bitwise_and_int                $1 &= $2
  203. bitwise_and_int                $0 &= $1
  204. copy_4_slots_unmasked          $1..4 = c2.f4
  205. copy_4_slots_unmasked          $5..8 = c3.f4
  206. cmpne_4_floats                 $1..4 = notEqual($1..4, $5..8)
  207. bitwise_or_2_ints              $1..2 |= $3..4
  208. bitwise_or_int                 $1 |= $2
  209. copy_3_slots_unmasked          $2..4 = c2.i3
  210. copy_3_slots_unmasked          $5..7 = c3.i3
  211. cmpne_3_ints                   $2..4 = notEqual($2..4, $5..7)
  212. bitwise_or_int                 $3 |= $4
  213. bitwise_or_int                 $2 |= $3
  214. bitwise_or_int                 $1 |= $2
  215. bitwise_and_int                $0 &= $1
  216. copy_slot_unmasked             valid = $0
  217. swizzle_4                      $0..3 = ($0..3).xxxx
  218. copy_4_constants               $4..7 = colorRed
  219. copy_4_constants               $8..11 = colorGreen
  220. mix_4_ints                     $0..3 = mix($4..7, $8..11, $0..3)
  221. copy_4_slots_unmasked          [main].result = $0..3
  222. load_src                       src.rgba = [main].result
